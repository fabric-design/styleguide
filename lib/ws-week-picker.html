<!-- inject:global -->
<!-- endinject -->
<dom-module id="ws-week-picker">
    <template>
        <!-- inject:html -->
        <div class="week-wrapper">
  <input type="text" class="week-input" readonly placeholder="week picker" /> <span id="ws-week-icon"></span>
  <div class="week-picker">
    <div class="prev-year">
      <span class="checkPrevYear"></span>
      <div class="year"></div>
      <div class="weeks"></div>
    </div>
    <div class="cur-year">
      <div class="year"></div>
      <div class="weeks"></div>
    </div>
    <div class="next-year">
      <div class="year"></div>
      <span class="checkNextYear"></span>
      <div class="weeks"></div>
    </div>
    <span id="week-icon"></span>
  </div>
</div>
        <!-- endinject -->
        <style>
            /* inject:styles */
            :host ::content .week-wrapper {
  display: inline-block;
  position: relative;
  font-style: "acumin-pro", "Helvetica Neue", Helvetica, Arial, sans-serif; }
  :host ::content .week-wrapper > #week-icon {
    right: 11px;
    background: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDUxMS42MzQgNTExLjYzNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTExLjYzNCA1MTEuNjM0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggZD0iTTQ4Mi41MTMsODMuOTQyYy03LjIyNS03LjIzMy0xNS43OTctMTAuODUtMjUuNjk0LTEwLjg1aC0zNi41NDF2LTI3LjQxYzAtMTIuNTYtNC40NzctMjMuMzE1LTEzLjQyMi0zMi4yNjEgICBDMzk3LjkwNiw0LjQ3NSwzODcuMTU3LDAsMzc0LjU5MSwwaC0xOC4yNjhjLTEyLjU2NSwwLTIzLjMxOCw0LjQ3NS0zMi4yNjQsMTMuNDIyYy04Ljk0OSw4Ljk0NS0xMy40MjIsMTkuNzAxLTEzLjQyMiwzMi4yNjF2MjcuNDEgICBoLTEwOS42M3YtMjcuNDFjMC0xMi41Ni00LjQ3NS0yMy4zMTUtMTMuNDIyLTMyLjI2MUMxNzguNjQsNC40NzUsMTY3Ljg4NiwwLDE1NS4zMjEsMEgxMzcuMDUgICBjLTEyLjU2MiwwLTIzLjMxNyw0LjQ3NS0zMi4yNjQsMTMuNDIyYy04Ljk0NSw4Ljk0NS0xMy40MjEsMTkuNzAxLTEzLjQyMSwzMi4yNjF2MjcuNDFINTQuODIzYy05LjksMC0xOC40NjQsMy42MTctMjUuNjk3LDEwLjg1ICAgYy03LjIzMyw3LjIzMi0xMC44NSwxNS44LTEwLjg1LDI1LjY5N3YzNjUuNDUzYzAsOS44OSwzLjYxNywxOC40NTYsMTAuODUsMjUuNjkzYzcuMjMyLDcuMjMxLDE1Ljc5NiwxMC44NDksMjUuNjk3LDEwLjg0OWg0MDEuOTg5ICAgYzkuODk3LDAsMTguNDctMy42MTcsMjUuNjk0LTEwLjg0OWM3LjIzNC03LjIzNCwxMC44NTItMTUuODA0LDEwLjg1Mi0yNS42OTNWMTA5LjYzOSAgIEM0OTMuMzU3LDk5LjczOSw0ODkuNzQzLDkxLjE3NSw0ODIuNTEzLDgzLjk0MnogTTM0Ny4xODcsNDUuNjg2YzAtMi42NjcsMC44NDktNC44NTgsMi41Ni02LjU2NyAgIGMxLjcxMS0xLjcxMSwzLjkwMS0yLjU2OCw2LjU3LTIuNTY4aDE4LjI2OGMyLjY3LDAsNC44NTMsMC44NTQsNi41NywyLjU2OGMxLjcxMiwxLjcxMiwyLjU2NywzLjkwMywyLjU2Nyw2LjU2N3Y4Mi4yMjQgICBjMCwyLjY2Ni0wLjg1NSw0Ljg1My0yLjU2Nyw2LjU2N2MtMS43MTgsMS43MDktMy45LDIuNTY4LTYuNTcsMi41NjhoLTE4LjI2OGMtMi42NjksMC00Ljg1OS0wLjg1NS02LjU3LTIuNTY4ICAgYy0xLjcxMS0xLjcxNS0yLjU2LTMuOTAxLTIuNTYtNi41NjdWNDUuNjg2eiBNMTI3LjkxNSw0NS42ODZjMC0yLjY2NywwLjg1NS00Ljg1OCwyLjU2OC02LjU2NyAgIGMxLjcxNC0xLjcxMSwzLjkwMS0yLjU2OCw2LjU2Ny0yLjU2OGgxOC4yNzFjMi42NjcsMCw0Ljg1OCwwLjg1NCw2LjU2NywyLjU2OGMxLjcxMSwxLjcxMiwyLjU3LDMuOTAzLDIuNTcsNi41Njd2ODIuMjI0ICAgYzAsMi42NjYtMC44NTUsNC44NTYtMi41Nyw2LjU2N2MtMS43MTMsMS43MDktMy45LDIuNTY4LTYuNTY3LDIuNTY4SDEzNy4wNWMtMi42NjYsMC00Ljg1Ni0wLjg1NS02LjU2Ny0yLjU2OCAgIGMtMS43MDktMS43MTUtMi41NjgtMy45MDEtMi41NjgtNi41NjdWNDUuNjg2eiBNNDU2LjgxMiw0NzUuMDg4SDU0LjgyM3YtMjkyLjM2aDQwMS45ODlWNDc1LjA4OHoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K);
    top: 8px;
    position: absolute;
    width: 16px;
    height: 16px; }
    :host ::content .week-wrapper > #week-icon.active {
      width: 12px;
      height: 12px;
      top: 10px;
      background: center url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDk1LjkzOSA5NS45MzkiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDk1LjkzOSA5NS45Mzk7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBkPSJNNjIuODE5LDQ3Ljk3bDMyLjUzMy0zMi41MzRjMC43ODEtMC43ODEsMC43ODEtMi4wNDcsMC0yLjgyOEw4My4zMzMsMC41ODZDODIuOTU4LDAuMjExLDgyLjQ0OCwwLDgxLjkxOSwwICAgYy0wLjUzLDAtMS4wMzksMC4yMTEtMS40MTQsMC41ODZMNDcuOTcsMzMuMTIxTDE1LjQzNSwwLjU4NmMtMC43NS0wLjc1LTIuMDc4LTAuNzUtMi44MjgsMEwwLjU4NywxMi42MDggICBjLTAuNzgxLDAuNzgxLTAuNzgxLDIuMDQ3LDAsMi44MjhMMzMuMTIxLDQ3Ljk3TDAuNTg3LDgwLjUwNGMtMC43ODEsMC43ODEtMC43ODEsMi4wNDcsMCwyLjgyOGwxMi4wMiwxMi4wMjEgICBjMC4zNzUsMC4zNzUsMC44ODQsMC41ODYsMS40MTQsMC41ODZjMC41MywwLDEuMDM5LTAuMjExLDEuNDE0LTAuNTg2TDQ3Ljk3LDYyLjgxOGwzMi41MzUsMzIuNTM1ICAgYzAuMzc1LDAuMzc1LDAuODg0LDAuNTg2LDEuNDE0LDAuNTg2YzAuNTI5LDAsMS4wMzktMC4yMTEsMS40MTQtMC41ODZsMTIuMDItMTIuMDIxYzAuNzgxLTAuNzgxLDAuNzgxLTIuMDQ4LDAtMi44MjhMNjIuODE5LDQ3Ljk3ICAgeiIgZmlsbD0iIzAwMDAwMCIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=); }
  :host ::content .week-wrapper > input.week-input {
    width: 100%;
    height: 32px;
    line-height: 32px;
    padding-left: 11px;
    border-color: #D5D7DE;
    font-size: 14px; }
    :host ::content .week-wrapper > input.week-input.active {
      outline: 0;
      border-color: #008DC9; }
    :host ::content .week-wrapper > input.week-input:focus + #week-icon {
      width: 12px;
      height: 12px;
      top: 10px;
      background: center url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDk1LjkzOSA5NS45MzkiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDk1LjkzOSA5NS45Mzk7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBkPSJNNjIuODE5LDQ3Ljk3bDMyLjUzMy0zMi41MzRjMC43ODEtMC43ODEsMC43ODEtMi4wNDcsMC0yLjgyOEw4My4zMzMsMC41ODZDODIuOTU4LDAuMjExLDgyLjQ0OCwwLDgxLjkxOSwwICAgYy0wLjUzLDAtMS4wMzksMC4yMTEtMS40MTQsMC41ODZMNDcuOTcsMzMuMTIxTDE1LjQzNSwwLjU4NmMtMC43NS0wLjc1LTIuMDc4LTAuNzUtMi44MjgsMEwwLjU4NywxMi42MDggICBjLTAuNzgxLDAuNzgxLTAuNzgxLDIuMDQ3LDAsMi44MjhMMzMuMTIxLDQ3Ljk3TDAuNTg3LDgwLjUwNGMtMC43ODEsMC43ODEtMC43ODEsMi4wNDcsMCwyLjgyOGwxMi4wMiwxMi4wMjEgICBjMC4zNzUsMC4zNzUsMC44ODQsMC41ODYsMS40MTQsMC41ODZjMC41MywwLDEuMDM5LTAuMjExLDEuNDE0LTAuNTg2TDQ3Ljk3LDYyLjgxOGwzMi41MzUsMzIuNTM1ICAgYzAuMzc1LDAuMzc1LDAuODg0LDAuNTg2LDEuNDE0LDAuNTg2YzAuNTI5LDAsMS4wMzktMC4yMTEsMS40MTQtMC41ODZsMTIuMDItMTIuMDIxYzAuNzgxLTAuNzgxLDAuNzgxLTIuMDQ4LDAtMi44MjhMNjIuODE5LDQ3Ljk3ICAgeiIgZmlsbD0iIzAwMDAwMCIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=); }
  :host ::content .week-wrapper > .week-picker {
    padding: 13px 0;
    top: 40px;
    width: 596px;
    height: 290px;
    padding-bottom: 19px;
    background-color: #FFFFFF;
    position: absolute;
    display: none;
    box-shadow: 2px 3px 28px 3px #b8b8b8; }
    :host ::content .week-wrapper > .week-picker.opened {
      display: block; }
    :host ::content .week-wrapper > .week-picker > .prev-year {
      width: 85px;
      display: inline-block; }
      :host ::content .week-wrapper > .week-picker > .prev-year > .checkPrevYear {
        float: left;
        margin-left: 18px;
        margin-top: 2px;
        height: 12px;
        width: 12px;
        background: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjkgMTI5IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMjkgMTI5IiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KICA8Zz4KICAgIDxwYXRoIGQ9Im04OC42LDEyMS4zYzAuOCwwLjggMS44LDEuMiAyLjksMS4yczIuMS0wLjQgMi45LTEuMmMxLjYtMS42IDEuNi00LjIgMC01LjhsLTUxLTUxIDUxLTUxYzEuNi0xLjYgMS42LTQuMiAwLTUuOHMtNC4yLTEuNi01LjgsMGwtNTQsNTMuOWMtMS42LDEuNi0xLjYsNC4yIDAsNS44bDU0LDUzLjl6IiBmaWxsPSIjMDAwMDAwIi8+CiAgPC9nPgo8L3N2Zz4K) 0 -2px; }
      :host ::content .week-wrapper > .week-picker > .prev-year > .year {
        margin-left: 38px;
        color: #9B9BA3;
        font-weight: 600;
        padding-bottom: 13px; }
    :host ::content .week-wrapper > .week-picker > .cur-year {
      width: 433px;
      display: inline-block;
      margin: 0 -3px; }
      :host ::content .week-wrapper > .week-picker > .cur-year > .year {
        text-align: center;
        color: #9B9BA3;
        font-weight: 600;
        padding-bottom: 13px; }
    :host ::content .week-wrapper > .week-picker > .next-year {
      width: 76px;
      display: inline-block;
      float: right; }
      :host ::content .week-wrapper > .week-picker > .next-year > .checkNextYear {
        float: left;
        margin-left: -2px;
        margin-top: 2px;
        height: 12px;
        width: 12px;
        background: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjkgMTI5IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMjkgMTI5IiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KICA8Zz4KICAgIDxwYXRoIGQ9Im00MC40LDEyMS4zYy0wLjgsMC44LTEuOCwxLjItMi45LDEuMnMtMi4xLTAuNC0yLjktMS4yYy0xLjYtMS42LTEuNi00LjIgMC01LjhsNTEtNTEtNTEtNTFjLTEuNi0xLjYtMS42LTQuMiAwLTUuOCAxLjYtMS42IDQuMi0xLjYgNS44LDBsNTMuOSw1My45YzEuNiwxLjYgMS42LDQuMiAwLDUuOGwtNTMuOSw1My45eiIgZmlsbD0iIzAwMDAwMCIvPgogIDwvZz4KPC9zdmc+Cg==) 0 -2px; }
      :host ::content .week-wrapper > .week-picker > .next-year > .year {
        float: left;
        margin-left: 13px;
        padding-right: 6px;
        font-weight: 600;
        color: #9B9BA3;
        padding-bottom: 13px; }

:host ::content .week-wrapper > .week-picker > .cur-year > .weeks,
:host ::content .week-wrapper > .week-picker > .next-year > .weeks {
  margin-left: -5px; }

:host ::content .week-wrapper > .week-picker .month {
  box-sizing: border-box;
  color: #9B9BA3;
  display: inline-block;
  width: 40px;
  height: 40px;
  padding-left: 5px;
  line-height: 39px;
  text-align: center;
  margin-left: 1px;
  margin-bottom: 4px;
  background-color: #B0D6FB; }

:host ::content .week-wrapper > .week-picker .weeks > .weekNumbers:last-child > .month {
  padding-left: 0;
  width: 45px; }

:host ::content .week-wrapper > .week-picker .weekNumbers {
  width: 35.3px;
  height: 35.3px;
  float: left;
  font-size: 14px; }

:host ::content .week-wrapper > .week-picker .week {
  background: 0 0;
  border: 1px solid transparent;
  border-radius: 150px;
  box-sizing: border-box;
  color: #393939;
  cursor: pointer;
  display: inline-block;
  width: 32px;
  height: 32px;
  line-height: 31px;
  text-align: center;
  margin: 3px 6px; }

:host ::content .week-wrapper > .week-picker .week.now,
:host ::content .week-wrapper > .week-picker .week.now:hover {
  background-color: #008DC9;
  color: #FFFFFF; }

:host ::content .week-wrapper > .week-picker .week:hover {
  background-color: #B0D6FB; }

            /* endinject */
        </style>
    </template>

    <script>
    (function(){
        /* inject:js */
        'use strict';

Polymer({
  ready: function ready() {
    this.months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    this.date = new Date();
    this.curYear = this.date.getFullYear();
    this.curMonth = this.months[this.date.getMonth()];
    this.curWeek = this.getWeek(this.curYear, this.date.getMonth(), this.date.getDate());
    this.getElements();
    this.addListeners();
  },


  // Take all elements from week picker
  getElements: function getElements() {
    this.wrapper = this.$$('.week-wrapper');
    this.input = this.$$('.week-input');
    this.calendar = this.$$('.week-picker');
    this.crossIcon = this.$$('#week-icon');
    this.prevYearButton = this.$$('.checkPrevYear');
    this.nextYearButton = this.$$('.checkNextYear');
    // Calculate previous year and take previous year and weeks elements
    this.prevYear = this.curYear - 1;
    this.prevYearNumber = this.$$('.prev-year > .year');
    this.prevYearWeeks = this.$$('.prev-year > .weeks');
    // Take current year and weeks elements
    this.curYearNumber = this.$$('.cur-year > .year');
    this.curYearWeeks = this.$$('.cur-year > .weeks');
    // Calculate next year and take next year and weeks elements
    this.nextYear = this.curYear + 1;
    this.nextYearNumber = this.$$('.next-year > .year');
    this.nextYearWeeks = this.$$('.next-year > .weeks');
  },


  // Attach all event liteners
  addListeners: function addListeners() {
    var _this = this;

    document.addEventListener('click', function (e) {
      return _this.closeWeekPicker(e);
    });
    this.input.addEventListener('click', function () {
      return _this.openWeekPicker();
    });
    this.crossIcon.addEventListener('click', function () {
      return _this.cancel();
    });
    this.calendar.addEventListener('click', function (e) {
      return _this.calendarClick(e);
    });
    this.prevYearButton.addEventListener('click', function () {
      return _this.moveYearBefore();
    });
    this.nextYearButton.addEventListener('click', function () {
      return _this.moveYearAfter();
    });
  },


  // build calendar year, months and week numbers
  buildCalendar: function buildCalendar() {
    this.buildYears();
    this.buildWeeksAndMonth();
  },
  openWeekPicker: function openWeekPicker() {
    // Prevent on every click full redraw calendar
    this.calendar.className = 'week-picker opened';
    this.input.className = 'week-input active';
    this.crossIcon.className = 'week-icon active';
    // If input clear draw calendar and define current week and select it
    if (this.input.value == '') {
      this.buildCalendar();
      this.defineCurrent();
    } else {
      // if input have value - define current week as selected at previous time
      this.pickedWeekWrapper.className = 'week now';
    }
  },
  calendarClick: function calendarClick(e) {
    // If user pick on week number take all elements to return result to input field and close calendar
    if (e.target.className == 'week' || e.target.className == 'week now') {
      if (e.target.parentElement.parentElement.parentElement.className == 'prev-year') {
        this.pickedWeekYear = e.target.parentElement.parentElement.parentElement.children[1].firstElementChild.innerHTML;
      } else {
        this.pickedWeekYear = e.target.parentElement.parentElement.parentElement.firstElementChild.firstElementChild.innerHTML;
      }
      this.pickedWeekWrapper.className = 'week';
      this.pickedWeekWrapper = e.target;
      this.pickedWeekWrapper.className = 'week now';
      this.pickedResult = this.pickedWeekWrapper.innerHTML + '-' + this.pickedWeekYear;
      this.input.value = this.pickedResult;
      this.cancel();
    }
  },


  // Just close calendar on cross icon click
  cancel: function cancel() {
    this.calendar.className = 'week-picker';
    this.input.className = 'week-input used';
    this.crossIcon.className = 'week-icon';
  },


  // Changed year if user click left arrow button
  moveYearBefore: function moveYearBefore() {
    this.destroyCalendar();
    this.curYear -= 1;
    this.prevYear -= 1;
    this.nextYear -= 1;
    this.buildCalendar();
  },


  // Changed year if user click right arrow button
  moveYearAfter: function moveYearAfter() {
    this.destroyCalendar();
    this.curYear += 1;
    this.prevYear += 1;
    this.nextYear += 1;
    this.buildCalendar();
  },


  // Clean all generated elements if user change year
  destroyCalendar: function destroyCalendar() {
    this.prevYearNumber.innerHTML = '';
    this.prevYearWeeks.innerHTML = '';
    this.curYearNumber.innerHTML = '';
    this.curYearWeeks.innerHTML = '';
    this.nextYearNumber.innerHTML = '';
    this.nextYearWeeks.innerHTML = '';
  },


  // Close calendar if user don't click on calendar
  closeWeekPicker: function closeWeekPicker(e) {
    if (!this.contains(e.target)) {
      this.destroyCalendar();
      this.calendar.className = 'week-picker';
      this.input.className = 'week-input used';
      this.crossIcon.className = 'week-icon';
    }
  },
  createElement: function createElement(tag, className, content) {
    var element = document.createElement(tag);

    if (content) element.innerHTML = content;

    if (className) element.className = className;

    return element;
  },


  // Calculate week number of year depending on current day
  getWeek: function getWeek(year, month, day) {
    var y2k = function y2k(number) {
      return number < 1000 ? number + 1900 : number;
    };
    var when = new Date(year, month, day);
    var newYear = new Date(year, 0, 1);
    var modDay = newYear.getDay();
    if (modDay == 0) modDay = 6;else modDay--;
    // Days between current day and 1st of January
    var daynum = (Date.UTC(y2k(year), when.getMonth(), when.getDate(), 0, 0, 0) - Date.UTC(y2k(year), 0, 1, 0, 0, 0)) / 1000 / 60 / 60 / 24 + 1;

    if (modDay < 4) {
      var weeknum = Math.floor((daynum + modDay - 1) / 7) + 1;
    } else {
      var weeknum = Math.floor((daynum + modDay - 1) / 7);
      if (weeknum == 0) {
        year--;
        var prevNewYear = new Date(year, 0, 1);
        var prevmodDay = prevNewYear.getDay();
        if (prevmodDay == 0) prevmodDay = 6;else prevmodDay--;
        if (prevmodDay < 4) weeknum = 53;else weeknum = 52;
      }
    }

    return weeknum;
  },


  // Calculate all week numbers of year in January and save them in array
  // January is explicitly to other months, because need to calculate first week of year
  // It can be week number from previous year
  janWeekNumbers: function janWeekNumbers(year) {
    var firstMonthWeeks = [];
    var firstWeek = this.getWeek(year, 0, 1);
    var lastWeek = this.getWeek(year, 0, 31);
    if (firstWeek != 1) {
      firstMonthWeeks[0] = firstWeek;
      for (var j = 1; j <= lastWeek; j++) {
        firstMonthWeeks.push(j);
      }
    } else {
      for (var _j = 0; _j < lastWeek; _j++) {
        firstMonthWeeks.push(_j + 1);
      }
    }
    return firstMonthWeeks;
  },


  // Return array of all week numbers of year in month
  weekNumbersByMonth: function weekNumbersByMonth(year, month) {
    var monthWeeks = [];
    var firstWeek = this.getWeek(year, month, 1);
    var lastWeek = this.getWeek(year, month, 31);
    for (var j = firstWeek; j <= lastWeek; j++) {
      monthWeeks.push(j);
    }
    return monthWeeks;
  },


  // Array of all weeks in year, splited by month
  weeksNumbersForYear: function weeksNumbersForYear(year) {
    var weeks = [];
    weeks[0] = this.janWeekNumbers(year);
    for (var i = 1; i <= 11; i++) {
      weeks[i] = this.weekNumbersByMonth(year, i);
    }
    return weeks;
  },


  // Draw span with year number
  buildYears: function buildYears() {
    this.prevYearNumber.innerHTML = '<span>' + this.prevYear + '</span>';
    this.nextYearNumber.innerHTML = '<span>' + this.nextYear + '</span>';
    this.curYearNumber.innerHTML = '<span>' + this.curYear + '</span>';
  },


  // Draw months and week numbers
  buildWeeksAndMonth: function buildWeeksAndMonth() {
    var _this2 = this;

    var self = this;
    this.prevYearWeeksNumbers = this.weeksNumbersForYear(this.prevYear).slice(10);
    // Draw month and it weeks in different spans
    this.prevYearWeeksNumbers.forEach(function (month, i) {
      _this2.prevYearWeeks.innerHTML += '<span class="weekNumbers">\n                                          <span class="month">' + self.months[i + 10] + '</span>\n                                          <span class="week">' + month.join('</span><span class="week">') + '</span>\n                                       </span>';
    });
    this.curYearWeeksNumbers = this.weeksNumbersForYear(this.curYear);
    this.curYearWeeksNumbers.forEach(function (month, i) {
      _this2.curYearWeeks.innerHTML += '<span class="weekNumbers">\n                                          <span class="month">' + self.months[i] + '</span>\n                                          <span class="week">' + month.join('</span><span class="week">') + '</span>\n                                       </span>';
    });
    this.nextYearWeeksNumbers = this.weeksNumbersForYear(this.nextYear).slice(0, 2);
    this.nextYearWeeksNumbers.forEach(function (month, i) {
      _this2.nextYearWeeks.innerHTML += '<span class="weekNumbers">\n                                          <span class="month">' + self.months[i] + '</span>\n                                          <span class="week">' + month.join('</span><span class="week">') + '</span>\n                                       </span>';
    });
  },


  // Define what is current week number
  defineCurrent: function defineCurrent() {
    var self = this;
    var wholeWeeks = Polymer.dom(this.root).querySelectorAll('.cur-year .week');
    for (var i = 0; i < wholeWeeks.length; i++) {
      if (wholeWeeks[i].innerHTML == self.curWeek && wholeWeeks[i].parentElement.firstElementChild.innerHTML == self.curMonth) {
        self.pickedWeekWrapper = wholeWeeks[i];
        self.pickedWeekWrapper.className = 'week now';
      }
    }
  }
});
        /* endinject */
    })()
    </script>
</dom-module>
